<!-- ======= Form for FieldOfStudy ======= -->
<div th:fragment="item-form">
    <div class="mb-4">
        <h4 th:text="#{fieldOfStudy.edit.card.body.name}"></h4>
        <div class="form-outline">
            <input class="form-control"
                   id="name"
                   th:field="*{name}"
                   type="text"/>
            <label class="form-label" for="name" th:text="#{fieldOfStudy.name}"></label>
        </div>
        <div class="alert alert-danger" th:errors="*{name}"
             th:if="${#fields.hasErrors('name')}"></div>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{fieldOfStudy.item.card.body.levelOfEducation}"></h4>
        <select class="form-select" id="levelOfEducation" th:field="*{levelOfEducation}">
            <option th:each="fieldOpt : ${T(com.example.classroom.enums.LevelOfEducation).values()}"
                    th:text="${fieldOpt.value}"
                    th:value="${fieldOpt}">
            </option>
        </select>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{fieldOfStudy.item.card.body.mode}"></h4>
        <select class="form-select" id="mode" th:field="*{mode}">
            <option th:each="fieldOpt : ${T(com.example.classroom.enums.ModeOfStudy).values()}"
                    th:text="${fieldOpt.value}"
                    th:value="${fieldOpt}">
            </option>
        </select>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{fieldOfStudy.item.card.body.department}"></h4>
        <select class="form-select" id="department" th:field="*{department}">
            <option th:each="fieldOpt : ${departments}"
                    th:text="${fieldOpt.name}"
                    th:value="${fieldOpt.id}">
            </option>
        </select>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{fieldOfStudy.item.card.body.titleGained}"></h4>
        <select class="form-select" id="titleGained" th:field="*{title}">
            <option th:each="fieldOpt : ${T(com.example.classroom.enums.AcademicTitle).values()}"
                    th:text="${fieldOpt.fullTitle}"
                    th:value="${fieldOpt}">
            </option>
        </select>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{fieldOfStudy.item.card.body.description}"></h4>
        <div class="form-outline">
                                    <textarea class="form-control"
                                              id="description"
                                              rows="5"
                                              th:field="*{description}"></textarea>
            <label class="form-label" for="description"
                   th:text="#{fieldOfStudy.description}"></label>
            <div class="form-helper" th:text="#{fieldOfStudy.description.helper}"></div>
        </div>
        <div class="alert alert-danger" th:errors="*{description}"
             th:if="${#fields.hasErrors('description')}"></div>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{fieldOfStudy.item.card.body.image}"></h4>
        <label class="form-label" for="customFile" th:text="#{fieldOfStudy.item.card.body.image.desc}"></label>
        <input accept="image/png, image/jpeg" class="form-control" id="customFile"
               name="imageUpload"
               required
               th:value="*{image}"
               type="file"/>
    </div>
</div>


<!-- ======= View FieldOfStudy card body ======= -->
<div th:fragment="view-item">
    <div class="mb-4">
        <h4 th:text="#{department.name}"></h4>
        <span th:text="${department.name}"></span>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{department.address}"></h4>
        <span th:text="${department.address}"></span>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{department.telNumber}"></h4>
        <span th:text="${department.telNumber}"></span>
    </div>
    <hr>
    <div class="mb-4">
        <h4 th:text="#{department.dean}"></h4>
        <a class="text-body" th:if="${department.dean != null}"
           th:href="@{/dashboard/teachers/{id}(id=${department.dean.id})}">
            <span th:text="${department.dean}"></span>
            <i class="fas fa-regular fa-up-right-from-square ml-1"></i>
        </a>
        <div th:unless="${department.dean != null}">
            <span th:text="#{department.dean.null}"></span>
            <div th:replace="department/buttons :: btn-edit"></div>
        </div>
    </div>

    <hr>

    <!--    Fields of studies block -->
    <div class="mb-3">
        <span class="h4 mr-2" th:text="#{department.fieldsOfStudy}"></span>
        <a aria-controls="collapseExample"
           aria-expanded="false" class="btn btn-secondary btn-rounded" th:if="${department.fieldsOfStudy.size() > 0}"
           data-mdb-toggle="collapse" href="#collapseExample" role="button"
           th:text="#{button.show.hide}">
        </a>
        <div class="mb-3" th:unless="${department.fieldsOfStudy.size() > 0}">
            <span th:text="#{department.fieldsOfStudy.empty}"></span>
            <div th:replace="department/buttons :: btn-edit"></div>
        </div>
    </div>
    <div class="collapse mt-3" id="collapseExample">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <th:block th:each="fieldOpt, iterStat2 : ${department.fieldsOfStudy}">
                <div class="col">
                    <!-- ======= Item Card ======= -->
                    <div class="card h-100">
                        <div class="bg-image hover-overlay ripple"
                             data-mdb-ripple-color="light">
                            <img class="img-fluid"
                                 th:alt="${fieldOpt.name}"
                                 th:if="${fieldOpt.image} != null"
                                 th:src="@{${imagesPath} + '/' + ${fieldOpt.image}}"/>
                            <img alt="Default image"
                                 class="img-fluid"
                                 th:src="@{${imagesPath} + '/' + 'default.jpg'}"
                                 th:unless="${fieldOpt.image} != null"/>
                            <a th:href="@{/dashboard/fields-of-study/{id}(id=${fieldOpt.id})}">
                                <div class="mask"
                                     style="background-color: rgba(251, 251, 251, 0.15);"></div>
                            </a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title" th:text="${fieldOpt.name}"></h5>
                            <div class="text-muted"
                                 th:text="${fieldOpt.levelOfEducation.value} + ', ' +
                                            ${fieldOpt.mode.value}">
                            </div>
                            <p class="card-text" th:text="${fieldOpt.description}"></p>
                        </div>
                        <div class="card-footer text-center">
                            <a class="btn btn-primary"
                               th:href="@{/dashboard/fields-of-study/{id}(id=${fieldOpt.id})}">
                                <span th:text="#{button.view.fielOfStudy}"></span>
                                <i class="fas fa-regular fa-up-right-from-square"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </th:block>
        </div>
    </div>

</div>
